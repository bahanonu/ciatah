<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Biafra Ahanonu">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
<title>Cross-session alignemnt</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link href="../css/extra.css" rel="stylesheet" />
  <link href="../css/pygments.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Cross-session alignemnt";
    var mkdocs_page_input_path = "help_cross_session_alignment.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CIAtah</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">End-to-end</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../all_docs/">One-page readme</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../install/">Quick Start</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../install_alt/">Install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../example_data/">Example data</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependencies</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Repository</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../data/">Data formats</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../notes/">Notes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../organization/">Organization</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Processing imaging data</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_overview/">Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_all/">One-page step-by-step</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_downsample_raw/">1| Downsample raw movies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_preprocess_check/">2| Check pre-process settings</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_preprocess/">3| <u><strong>Processing imaging movies</strong></u></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_modify_movies/">4| Movie clean-up</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_signal_extraction/">5| <u><strong>Cell extraction</strong></u></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_signal_extraction_load/">6| Loading cell extraction outputs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_signal_extraction_validation/">7| <u><strong>Cell extraction validation</strong></u></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_signal_sorting_manual/">8| <u><strong>Manual cell sorting</strong></u></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_signal_region_analysis/">9| Region-specific analysis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_detailed_cross_session/">10| <u><strong>Cross-session alignment</strong></u></a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Animal tracking</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../pipeline_animal_tracking/">Animal tracking (ImageJ+MATLAB)</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../api_example_pipeline/">Custom pipelines</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../api_ciapkg/">ciapkg</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Help</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../help_issues/">Issues and fixes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../blank/"><div class='subsection1'>Data</div></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_inscopix/">Inscopix</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_nwb/">Neurodata Without Borders</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../blank/"><div class='subsection1'>Interface</div></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_contrast/">Movie display and noise</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../blank/"><div class='subsection1'>Analysis</div></a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_analysis_methods/">Analysis methods</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_large_movie_analysis/">Large movie analysis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_stripe_removal/">Stripe removal</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_snr/">Improving signal-to-noise</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_spatial_filtering/">Spatial filtering</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_temporal_downsampling/">Temporal downsampling</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_motion_correction/">Motion correction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_cell_extraction/">Cell extraction</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_manual_cell_sorting/">Manual cell sorting</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Cross-session alignemnt</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#algorithm-overview">Algorithm overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-output">Example output</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#algorithm-results">Algorithm results</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cross-session-metrics-and-results-on-cross-session-amygdala-response-to-pain">Cross-session metrics and results on cross-session amygdala response to pain</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pfc-cross-session-alignment">PFC cross-session alignment.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dorsal-striatum-cross-session-algorithm-comparison">Dorsal striatum cross-session algorithm comparison</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../help_animal_tracking/">Animal tracking</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Misc</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../acknowledgments/">Acknowledgments</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../references/">Cite</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../questions/">Questions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../license/">License</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CIAtah</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Help &raquo;</li>
        
      
    
    <li>Cross-session alignemnt</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="cross-day-or-session-cell-alignment-alignment">Cross-day or -session cell alignment alignment<a class="headerlink" href="#cross-day-or-session-cell-alignment-alignment" title="Permanent link">&para;</a></h1>
<p align="center">
  <strong>Stable cell alignment across imaging sessions.</strong>
</p>
<p align="center">
  <a href="https://user-images.githubusercontent.com/5241605/105437652-4ca74a80-5c16-11eb-893a-87ea6d53e964.gif">
    <img src="https://user-images.githubusercontent.com/5241605/105437652-4ca74a80-5c16-11eb-893a-87ea6d53e964.gif" align="center" title="m121_matchedCells" alt="m121_matchedCells" width="20%" style="margin-left:auto;margin-right:auto;display:block;margin-bottom: 1%;">
  </a>
</p>

<p>The main function used to run cross-session analysis that allows users to align cells across sessions/days can be found at:
- <a href="https://github.com/bahanonu/ciatah/blob/master/classification/matchObjBtwnTrials.m">https://github.com/bahanonu/ciatah/blob/master/classification/matchObjBtwnTrials.m</a></p>
<p>Below is an example of what the main output from cross-session alignment, a <code>globalIDs</code> matrix containing indices matches cells across days, looks like when visualized. Each column is an imaging session and each row is an individual global cell with the color indicating that global cell's within-session number. Any black cells indicate where no match was found for that global cell in that imaging day.</p>
<p><a href="https://user-images.githubusercontent.com/5241605/126750867-1ea1bcff-b3d1-493f-aac9-b7b7c7292796.png" target="_blank"><img src="https://user-images.githubusercontent.com/5241605/126750867-1ea1bcff-b3d1-493f-aac9-b7b7c7292796.png" alt="Global cell output" width="70%"/></a></p>
<h2 id="algorithm-overview">Algorithm overview<a class="headerlink" href="#algorithm-overview" title="Permanent link">&para;</a></h2>
<p>For details, see <strong>Cross-day analysis of BLA neuronal activity</strong> methods section in the Corder<em>, Ahanonu</em>, et al. <em>Science</em>, 2019:</p>
<ul>
<li><a href="http://science.sciencemag.org/content/sci/suppl/2019/01/16/363.6424.276.DC1/aap8586_Corder_SM.pdf#page=10">http://science.sciencemag.org/content/sci/suppl/2019/01/16/363.6424.276.DC1/aap8586_Corder_SM.pdf#page=10</a>.</li>
</ul>
<p>We will also have details in an forthcoming imaging experiments and analysis book chapter.</p>
<!-- ![image](https://user-images.githubusercontent.com/5241605/51709763-21b09e80-1fdc-11e9-9332-1d52c9ed6bd5.png) -->
<p><img alt="image" src="https://user-images.githubusercontent.com/5241605/126744851-cd6e64ab-9b83-40bf-aa38-2301276f0ccf.png" /></p>
<p>Below is a general description of the algorithm/method used to match cells across sessions and references the above figure. A reference to the associated book chapter will be added in the future.</p>
<ol>
<li>
<p>Load the cell extraction spatial filters and threshold them by setting to zero any values below 40% the maximum value for each spatial filter and use these thresholded filters to calculate each neuron's centroid location. You can calculate the centroid using the <em>regionprops</em> function in MATLAB. <strong>Do not</strong> round each neuron's centroid coordinates to the nearest pixel value as this would reduce accuracy of cross-day alignment.</p>
</li>
<li>
<p>Next, create simplified spatial filters that contained a 10-pixel-radius circle (this can be varied based on microns-per-pixel of the movie and size of cells) centered on each neuron's centroid location. This allows you to register different days while ignoring any slight day-to-day differences in the cell extraction algorithm's estimate of each neuron's shape even if the centroid locations are similar.</p>
</li>
<li>
<p>For each animal, we recommend that if you have <em>N</em> sessions to align that you choose the <em>N/2</em> session (rounded down to the nearest whole number) to align to (referred to as the <em>align session</em>) to compensate for any drift or other imaging changes that may have occurred during the course of the imaging protocol.</p>
</li>
<li>
<p>For all imaging sessions create two neuron maps based on the thresholded spatial (see fig panel A, step 1, "thresholded neuron maps") and 10-pixel-radius circle (see fig panel A, step 2, "circle neuron maps") filters by taking a maximum projection across all <em>x</em> and <em>y</em> pixels and spatial filters (e.g. a max operation in the 3^rd^ dimension on a <em>x</em> × <em>y</em> × <em>n</em> neuron spatial filter matrix, where <em>n</em> = neuron number).</p>
</li>
<li>
<p>You then need to register these neuron maps to the <em>align session</em> using <em>Turboreg</em> with rotation enabled for all animals and isometric (projective) scaling enabled for a subset of animals in cases where that improves results. The registration steps are as follows (see fig panel A, step 3):</p>
<ul>
<li>Register the thresholded neuron map for a given session to the <em>align session</em> threshold neuron map.</li>
<li>Use the output 2D spatial transformation coordinates to also register the circle neuron maps.</li>
<li>Then register the circle neuron map with that animal's <em>align session</em> circle neuron map.</li>
<li>Apply the resulting 2D spatial transformation coordinates to the thresholded neuron map.</li>
<li>Repeat this procedure at least five times.</li>
<li>Lastly, use the final registration coordinates to transform all spatial filters from that session so they matched the <em>align session</em>'s spatial filters and repeat this process for all sessions for each animal individually.</li>
</ul>
</li>
<li>
<p>After registering all sessions to the <em>align session</em>, re-calculate all the centroid locations (see fig panel A, step 4).</p>
</li>
<li>
<p>Set the <em>align session</em> centroids as the initial seed for all <em>global cells</em> (see fig panel A, step 5)<em>.</em> Global cells are a tag to identify neurons that you match across imaging sessions.</p>
<ul>
<li>For example, global cell #1 might be associated with neurons that are at index number 1, 22, 300, 42, and 240 within the cell extraction analysis matrices across each of the first five imaging sessions, respectively.</li>
</ul>
</li>
<li>
<p>Starting with the <em>align session</em> for an animal, calculate the pairwise Euclidean distance between all global cells' and the selected session's (likely 1^st^) neurons' centroids.</p>
</li>
<li>
<p>Then identify any cases in which a global cell is within 5 μm (nominally ~2 pixels in our data, this can be varied by the user) of a selected session's neurons. This distance depends on the density of cells in your imaging sessions, a stricter cut-off should be set for more dense brain areas. When you find a match, then check that the spatial filter is correlated (e.g. with 2-D correlation coefficient, Jaccard distance, or other measure) above a set threshold (e.g. <em>r</em> &gt; 0.4) with all other neurons associated with that global cell (see fig panel A, step 6).</p>
</li>
<li>
<p>If a neuron passes the above criteria, add that neuron to that global cell's pool of neurons then recalculate the global cell's centroid as the mean location between all associated session neurons' centroid locations and annotate any unmatched neurons in that session as new candidate global cells.</p>
</li>
<li>
<p>Repeat this process for all sessions associated with a given animal.</p>
</li>
</ol>
<h2 id="example-output">Example output<a class="headerlink" href="#example-output" title="Permanent link">&para;</a></h2>
<ul>
<li>Example output of several mPFC animals across multiple sessions. Color is used to indicate a global ID cell (e.g. the same cell matched across multiple days).
<img src="https://user-images.githubusercontent.com/5241605/51710281-7a346b80-1fdd-11e9-8cad-3b3657038375.gif" width=600/></li>
</ul>
<!-- ![2016_08_22_mpfcfear_allanimals_crossdayalignment](https://user-images.githubusercontent.com/5241605/51710281-7a346b80-1fdd-11e9-8cad-3b3657038375.gif) -->

<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>The below commands in MATLAB can be used to align sessions across days.</p>
<div class="codehilite"><pre><span></span><code><span class="lineno" data-linenos=" 1 "></span><span class="c">% Create input images, cell array of [x y nCells] matrices</span>
<span class="lineno" data-linenos=" 2 "></span><span class="n">inputImages</span> <span class="p">=</span> <span class="p">{</span><span class="n">day1Images</span><span class="p">,</span><span class="n">day2Images</span><span class="p">,</span><span class="n">day3Images</span><span class="p">};</span>
<span class="lineno" data-linenos=" 3 "></span>
<span class="lineno" data-linenos=" 4 "></span><span class="c">% options to change</span>
<span class="lineno" data-linenos=" 5 "></span><span class="n">opts</span><span class="p">.</span><span class="n">maxDistance</span> <span class="p">=</span> <span class="mi">5</span><span class="p">;</span> <span class="c">% distance in pixels between centroids for them to be grouped</span>
<span class="lineno" data-linenos=" 6 "></span><span class="n">opts</span><span class="p">.</span><span class="n">trialToAlign</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c">% which session to start alignment on</span>
<span class="lineno" data-linenos=" 7 "></span><span class="n">opts</span><span class="p">.</span><span class="n">nCorrections</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c">%number of rounds to register session cell maps.</span>
<span class="lineno" data-linenos=" 8 "></span><span class="n">opts</span><span class="p">.</span><span class="n">RegisTypeFinal</span> <span class="p">=</span> <span class="mi">2</span> <span class="c">% 3 = rotation/translation and iso scaling; 2 = rotation/translation, no iso scaling</span>
<span class="lineno" data-linenos=" 9 "></span>
<span class="lineno" data-linenos="10 "></span><span class="c">% Run alignment code</span>
<span class="lineno" data-linenos="11 "></span><span class="p">[</span><span class="n">alignmentStruct</span><span class="p">]</span> <span class="p">=</span> <span class="n">matchObjBtwnTrials</span><span class="p">(</span><span class="n">inputImages</span><span class="p">,</span><span class="s">&#39;options&#39;</span><span class="p">,</span><span class="n">opts</span><span class="p">);</span>
<span class="lineno" data-linenos="12 "></span>
<span class="lineno" data-linenos="13 "></span><span class="c">% Global IDs is a matrix of [globalID sessionID]</span>
<span class="lineno" data-linenos="14 "></span><span class="c">% Each (globalID, sessionID) pair gives the within session ID for that particular global ID</span>
<span class="lineno" data-linenos="15 "></span><span class="n">globalIDs</span> <span class="p">=</span> <span class="n">alignmentStruct</span><span class="p">.</span><span class="n">globalIDs</span><span class="p">;</span>
<span class="lineno" data-linenos="16 "></span>
<span class="lineno" data-linenos="17 "></span><span class="c">% View the cross-session matched cells, saved to `private\_tmpFiles` sub-folder.</span>
<span class="lineno" data-linenos="18 "></span><span class="p">[</span><span class="n">success</span><span class="p">]</span> <span class="p">=</span> <span class="n">createMatchObjBtwnTrialsMaps</span><span class="p">(</span><span class="n">inputImages</span><span class="p">,</span><span class="n">alignmentStruct</span><span class="p">);</span>
</code></pre></div>
<p>In certain cases, you want to run analysis on the registered images, see below.
<div class="codehilite"><pre><span></span><code><span class="lineno" data-linenos=" 1 "></span><span class="c">% Get registered images, cell array of [x y nCells] matrices</span>
<span class="lineno" data-linenos=" 2 "></span><span class="n">registeredImagesCell</span> <span class="p">=</span> <span class="n">alignmentStruct</span><span class="p">.</span><span class="n">inputImages</span><span class="p">;</span>
<span class="lineno" data-linenos=" 3 "></span><span class="c">% Get registered cell maps, cell array of [x y] matrices</span>
<span class="lineno" data-linenos=" 4 "></span><span class="n">registeredCellmaps</span> <span class="p">=</span> <span class="n">alignmentStruct</span><span class="p">.</span><span class="n">objectMapTurboreg</span><span class="p">;</span>
<span class="lineno" data-linenos=" 5 "></span>
<span class="lineno" data-linenos=" 6 "></span><span class="c">% OR another method below.</span>
<span class="lineno" data-linenos=" 7 "></span>
<span class="lineno" data-linenos=" 8 "></span><span class="c">% Get the registration coordinates</span>
<span class="lineno" data-linenos=" 9 "></span><span class="n">globalRegCoords</span> <span class="p">=</span> <span class="n">alignmentStruct</span><span class="p">.</span><span class="n">registrationCoords</span><span class="p">;</span>
<span class="lineno" data-linenos="10 "></span><span class="n">globalRegCoords</span> <span class="p">=</span> <span class="n">globalRegCoords</span><span class="p">{</span><span class="n">folderNo</span><span class="p">};</span>
<span class="lineno" data-linenos="11 "></span>
<span class="lineno" data-linenos="12 "></span><span class="c">% Re-register input images for particular imaging session for later analysis.</span>
<span class="lineno" data-linenos="13 "></span><span class="k">for</span> <span class="n">iterationNo</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="nb">length</span><span class="p">(</span><span class="n">globalRegCoords</span><span class="p">)</span>
<span class="lineno" data-linenos="14 "></span>    <span class="n">fn</span><span class="p">=</span><span class="n">fieldnames</span><span class="p">(</span><span class="n">globalRegCoords</span><span class="p">{</span><span class="n">iterationNo</span><span class="p">});</span>
<span class="lineno" data-linenos="15 "></span>    <span class="n">for</span> <span class="s">i=1:length(fn)</span>
<span class="lineno" data-linenos="16 "></span>        <span class="n">localCoords</span> <span class="p">=</span> <span class="n">globalRegCoords</span><span class="p">{</span><span class="n">iterationNo</span><span class="p">}.(</span><span class="n">fn</span><span class="p">{</span><span class="nb">i</span><span class="p">});</span>
<span class="lineno" data-linenos="17 "></span>        <span class="p">[</span><span class="n">inputImages</span><span class="p">,</span> <span class="n">localCoords</span><span class="p">]</span> <span class="p">=</span> <span class="n">turboregMovie</span><span class="p">(</span><span class="n">inputImages</span><span class="p">,</span><span class="s">&#39;precomputedRegistrationCooords&#39;</span><span class="p">,</span><span class="n">localCoords</span><span class="p">);</span>
<span class="lineno" data-linenos="18 "></span>    <span class="n">end</span>
<span class="lineno" data-linenos="19 "></span><span class="s">end</span>
</code></pre></div></p>
<h2 id="algorithm-results">Algorithm results<a class="headerlink" href="#algorithm-results" title="Permanent link">&para;</a></h2>
<h3 id="cross-session-metrics-and-results-on-cross-session-amygdala-response-to-pain">Cross-session metrics and results on cross-session amygdala response to pain<a class="headerlink" href="#cross-session-metrics-and-results-on-cross-session-amygdala-response-to-pain" title="Permanent link">&para;</a></h3>
<p><img alt="image" src="https://user-images.githubusercontent.com/5241605/51709887-794f0a00-1fdc-11e9-921a-926fdcb48e4b.png" /></p>
<h3 id="pfc-cross-session-alignment">PFC cross-session alignment.<a class="headerlink" href="#pfc-cross-session-alignment" title="Permanent link">&para;</a></h3>
<p><img src="https://user-images.githubusercontent.com/5241605/51710282-7a346b80-1fdd-11e9-9848-8ef84c0cfc2a.gif" width=600/></p>
<!--![2015_10_27_mpfc_aligned_acrossday_colored-1](https://user-images.githubusercontent.com/5241605/51710282-7a346b80-1fdd-11e9-9848-8ef84c0cfc2a.gif)-->

<h3 id="dorsal-striatum-cross-session-algorithm-comparison">Dorsal striatum cross-session algorithm comparison<a class="headerlink" href="#dorsal-striatum-cross-session-algorithm-comparison" title="Permanent link">&para;</a></h3>
<ul>
<li>Original dorsal striatum cell maps from ICA with no motion correction applied.</li>
</ul>
<p><img alt="2017_05_02_p545_m121_p215_raw" src="https://cloud.githubusercontent.com/assets/5241605/25643108/9bcfccda-2f52-11e7-8514-31968752bd95.gif" /></p>
<ul>
<li><code>CIAtah</code> (Biafra's) registration algorithm<ul>
<li>Color is used to indicate a global ID cell (e.g. the same cell matched across multiple days). Thus, same color cell = same cell across sessions under the quick iteration parameters used in the below run.</li>
</ul>
</li>
</ul>
<p><img alt="2017_05_02_p545_m121_p215_corrected_biafraalgorithm2" src="https://cloud.githubusercontent.com/assets/5241605/25643473/dd7b11ce-2f54-11e7-8d84-eb98c5ef801c.gif" /></p>
<ul>
<li><code>CellReg</code> registration algorithm
Using older code at <a href="https://github.com/zivlab/CellReg">https://github.com/zivlab/CellReg</a>.</li>
</ul>
<p><img alt="2017_05_02_p545_m121_p215_corrected" src="https://cloud.githubusercontent.com/assets/5241605/25643113/a4445584-2f52-11e7-9ce8-5c5554ec9a5f.gif" /></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../help_animal_tracking/" class="btn btn-neutral float-right" title="Animal tracking">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../help_manual_cell_sorting/" class="btn btn-neutral" title="Manual cell sorting"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../help_manual_cell_sorting/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../help_animal_tracking/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
